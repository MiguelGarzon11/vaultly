---
import Layout from "../../layouts/Layout.astro";
---

<Layout title="Login">
  <main
    class="bg-dark-back w-full h-auto py-32 sm:h-screen flex flex-col justify-center items-center caret-transparent sm:gap-10"
  >
    <div
      class="flex flex-row justify-center items-center gap-4 sm:gap-5 mb-10"
      transition:name="vaultly"
    >
      <img src="/assets/icons/icon.svg" alt="Vaultly Logo" class="w-16 h-16 sm:w-20 sm:h-20"/>
      <h1 class="text-text font-extrabold text-5xl sm:text-7xl">Vaultly</h1>
    </div>

    <div class="fixed inset-0 bg-dark-back/80 backdrop-blur-sm z-50 w-full h-20 rounded-b-4xl">
      <a
        href="/"
        class="absolute left-6 top-7 sm:top-10 sm:left-10 flex flex-row justify-center items-center gap-2 hover:scale-105 transition active:scale-95 hover:text-secondary active:text-secondary"
      >
        <svg class="w-6 h-6 sm:w-8 sm:h-8">
          <use href="/assets/icons/back.svg"></use>
        </svg>
        <p class="text-lg sm:text-xl font-medium">Inicio</p>
      </a>

      <a
        href="/register"
        class="absolute right-6 top-7 sm:top-10 sm:right-10 flex flex-row justify-center items-center gap-2 hover:scale-105 transition active:scale-95 hover:text-secondary active:text-secondary"
      >
        <p class="text-lg sm:text-xl font-medium">Registrarse</p>
        <svg class="w-6 h-6 sm:w-8 sm:h-8">
          <use href="/assets/icons/go.svg"></use>
        </svg>
      </a>
      <hr class="fixed w-full text-text top-20 sm:hidden">
    </div>
    <div
      class="bg-back w-[90%] h-auto sm:w-[70%] lg:w-[600px] rounded-2xl px-5 py-10 sm:p-10 flex flex-col justify-center items-center"
    >
      <h2 class="text-center text-2xl sm:text-3xl text-text font-bold py-5">
        Iniciar sesión
      </h2>
      <p class="text-secondary-text text-xl text-center w-[90%]">
        Bienvenido de nuevo a tu espacio financiero seguro.
      </p>
      <form class="flex flex-col justify-center items-center w-full px-5 py-10 sm:p-10 gap-5">
        <input
          type="email"
          name="email"
          id="login"
          placeholder="myemail@example.com"
        />
        <input
          type="password"
          name="password"
          id="login"
          placeholder="Your password"
        />
        <a
          href=""
          class="text-start w-full text-primary/80 hover:text-primary/100"
          >¿Olvido su contraseña?</a
        >
        <button id="button">Ingresar</button>
      </form>
      <div class="flex flex-row gap-2 justify-center items-center w-full">
        <p>¿Aún no tiene un cuenta?</p>
        <a href="/register">
          <span class="text-lg text-primary/80 hover:text-primary/100"
            >Registrarse</span
          >
        </a>
      </div>
    </div>
  </main>
</Layout>

<script>
  import { actions } from "astro:actions";
  import { navigate } from "astro:transitions/client";

  const form = document.querySelector("form");
  form?.addEventListener("submit", async (event) => {
    event.preventDefault();
    const formData = new FormData(form);
    const { error } = await actions.login(formData);

    if (!error) navigate("/dashboard");
  });
</script>
